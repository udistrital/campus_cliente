<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
  <nb-card [hidden]="show_profile || show_info || show_acad || show_expe ||
    show_proy || show_prod || show_desc || show_docu">
    <nb-card-header>
      <!-- select -->
      <mat-form-field style="width: 100%;">
        <mat-label>{{ 'GLOBAL.aviso_programa' | translate }}:</mat-label>
        <mat-select [(ngModel)]="selectedValue" (ngModelChange)="pruebita()">
          <mat-option>--Seleccionar--</mat-option>
          <mat-option *ngFor="let item of posgrados" [value]="item">
            {{item.Nombre}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      
      <ngx-loading [hidden]="!loading"></ngx-loading>

      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3" align="center" id="info_basica">
          <nb-card class="exp-card" (click)="perfil_editar('info_persona')">
            <nb-card-header>{{ 'GLOBAL.info_basica' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-address-card-o fa-5x"></i>
              <p class="percentage">{{percentage_info}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="formacion_academica">
          <nb-card class="exp-card"
            (click)="perfil_editar('formacion_academica')">
            <nb-card-header>{{ 'GLOBAL.formacion_academica' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-graduation-cap fa-5x"></i>
              <p class="percentage">{{percentage_acad}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="experiencia_laboral">
          <nb-card class="exp-card"
            (click)="perfil_editar('experiencia_laboral')">
            <nb-card-header>{{ 'GLOBAL.experiencia_laboral' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-briefcase fa-5x"></i>
              <p class="percentage">{{percentage_expe}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="produccion_academica">
          <nb-card class="exp-card"
            (click)="perfil_editar('produccion_academica')">
            <nb-card-header>{{ 'GLOBAL.produccion_academica' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-book fa-5x"></i>
              <p class="percentage">{{percentage_prod}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="documento_programa">
          <nb-card class="exp-card"
            (click)="perfil_editar('documento_programa')">
            <nb-card-header>{{ 'GLOBAL.documento_programa' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-list-alt fa-5x"></i>
              <p class="percentage">{{percentage_docu}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="descuento_matricula">
          <nb-card class="exp-card"
            (click)="perfil_editar('descuento_matricula')">
            <nb-card-header>{{ 'GLOBAL.descuento_matricula' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-dollar fa-5x"></i>
              <p class="percentage">{{percentage_desc}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0" id="propuesta_grado">
          <nb-card class="exp-card"
            (click)="perfil_editar('propuesta_grado')">
            <nb-card-header>{{ 'GLOBAL.propuesta_grado' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-file-pdf-o fa-5x"></i>
              <p class="percentage">{{percentage_proy}} %</p>
            </nb-card-body>
          </nb-card>
        </div>

        <!-- <div class="col-sm-6 col-md-4 col-lg-3" align="center" *ngIf="info_ente_id && inscripcion_id !== 0">
          <nb-card class="exp-card"
            (click)="perfil_editar('perfil')">
            <nb-card-header>{{ 'GLOBAL.perfil' | translate }}</nb-card-header>
            <nb-card-body class="icon-form">
              <i class="fa fa-user fa-5x"></i>
            </nb-card-body>
          </nb-card>
        </div> -->
      </div>
    </nb-card-header>
    <nb-card-body>
      <div class="col-md-12">
        <ngb-progressbar showValue="true" type="success" textType="dark" [value]="percentage_total" [animated]="true" [height]="'15px'">
        </ngb-progressbar>
        <!-- <blockquote class="blockquote"> -->
          {{ 'GLOBAL.aviso_progreso' | translate}}
        <!-- </blockquote> -->
        <button class="btn btn-success pull-right" [disabled]="total"
          (click)="inscribirse()">{{ 'GLOBAL.inscribirse' | translate }}</button>
      </div>
    </nb-card-body>
  </nb-card>

  <!--Formularios------------------------------------------------------------->

  <nb-card [hidden]="!show_info">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_info" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
        <nb-tab tabTitle="{{ 'GLOBAL.info_persona' | translate }}"
          [active]="info_persona">
          <ngx-crud-info-persona info_persona_id={{this.info_ente_id}}
            inscripcion_id={{this.inscripcion_id}}
            (eventChange)="perfil_editar('info_caracteristica')"
            (result)="traerInfoPersona($event,0)">
          </ngx-crud-info-persona>
        </nb-tab>
        <nb-tab tabTitle="{{ 'GLOBAL.info_caracteristica' | translate }}"
          [active]="info_caracteristica"
          *ngIf="info_ente_id">
          <ngx-crud-info-caracteristica
            info_caracteristica_id={{this.info_ente_id}}
            (eventChange)="perfil_editar('info_contacto')"
            (result)="setPercentage_info($event,1)">
          </ngx-crud-info-caracteristica>
        </nb-tab>
        <nb-tab tabTitle="{{ 'GLOBAL.informacion_contacto' | translate }}"
          [active]="info_contacto"
          *ngIf="info_ente_id">
          <ngx-crud-informacion-contacto
            informacion_contacto_id={{this.info_ente_id}}
            (eventChange)="perfil_editar('default')"
            (result)="setPercentage_info($event,2)">
          </ngx-crud-informacion-contacto>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_acad" *ngIf="info_ente_id">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_acad" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
         <nb-tab tabTitle="{{ 'GLOBAL.formacion_academica' | translate }}">
          <ngx-list-formacion-academica (result)="setPercentage_acad($event,0)"></ngx-list-formacion-academica>
        </nb-tab>
        <nb-tab tabTitle="{{ 'GLOBAL.idiomas' | translate }}">
          <ngx-list-idiomas inscripcion_id={{this.inscripcion_id}} (result)="setPercentage_acad($event,1)"></ngx-list-idiomas>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_expe" *ngIf="info_ente_id">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_expe" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
        <nb-tab tabTitle="{{ 'GLOBAL.experiencia_laboral' | translate }}">
          <ngx-list-experiencia-laboral ente_id="{{info_ente_id}}"
            (result)="setPercentage_expe($event,0)">
          </ngx-list-experiencia-laboral>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_prod" *ngIf="info_ente_id">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_prod" [animated]="true" [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
         <nb-tab tabTitle="{{ 'GLOBAL.produccion_academica' | translate }}">
          <ngx-list-produccion-academica ente_id="{{info_ente_id}}"
            (result)="setPercentage_prod($event,0)">
          </ngx-list-produccion-academica>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_docu" *ngIf="info_ente_id && (estado_inscripcion < 3)">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_docu" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
        <nb-tab tabTitle="{{ 'GLOBAL.documento_programa' | translate }}">
          <ngx-list-documento-programa (result)="setPercentage_docu($event,0)"
            persona_id="{{info_ente_id}}" inscripcion_id="{{inscripcion_id}}">
          </ngx-list-documento-programa>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_desc" *ngIf="info_ente_id && (estado_inscripcion < 3)">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_desc" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
        <nb-tab tabTitle="{{ 'GLOBAL.descuento_matricula' | translate }}">
          <ngx-list-descuento-academico (result)="setPercentage_desc($event,0)"
           persona_id="{{info_ente_id}}" inscripcion_id="{{inscripcion_id}}">
          </ngx-list-descuento-academico>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <nb-card [hidden]="!show_proy" *ngIf="info_ente_id && (estado_inscripcion < 3)">
    <nb-card-body>
      <div class="row">
        <div class="col-md-11">
          <ngb-progressbar showValue="true" type="success"
            [value]="percentage_proy" [animated]="true"
            [height]="'15px'"></ngb-progressbar>
        </div>
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn"
            (click)="show_profile=false; show_info=false; show_acad=false;
            show_expe=false; show_proy=false; show_prod=false; show_docu=false;
            show_desc=false;">X</button>
        </div>
      </div>
      <nb-tabset fullWidth (changeTab)="selectTab($event)">
        <nb-tab tabTitle="{{ 'GLOBAL.propuesta_grado' | translate }}">
          <ngx-crud-propuesta-grado (result)="setPercentage_proy($event,0)" persona_id="{{info_ente_id}}"
            inscripcion_id="{{inscripcion_id}}">
          </ngx-crud-propuesta-grado>
        </nb-tab>
      </nb-tabset>
    </nb-card-body>
  </nb-card>

  <!--Vista de perfil------------------------------------------------------------->

  <div [hidden]="!show_profile" *ngIf="info_ente_id && show_profile">
    <ngx-perfil (url_editar)="perfil_editar($event)"
      info_persona_id="{{info_ente_id}}" inscripcion_id="{{inscripcion_id}}"></ngx-perfil>
  </div>
</div>
